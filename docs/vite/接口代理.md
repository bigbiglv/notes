# 接口代理 proxy

* 浏览器的同源策略会导致开发时期接口请求出现跨域，部署到线上就没有这个问题了
* 跨域可以让后端使用`cors`
* 前端也可以在开发的时候使用`proxy`代理，通过本地服务器去请求后端的数据，再由浏览器请求本地服务器，这样就不会出现跨域问题。
`vite.config.js`
```js
import { defineConfig } from "vite";
export default defineConfig({ 
  server: { 
    proxy: { 
      "/api": { 
        target: "http://localhost:3001", 
        changeOrigin: true, 
        rewrite: (path) => path.replace(/^\/api/, "")
      }
    }
  }
});
```
* proxy下的 `/api` 属性是用来转发`http://localhost:3000/api`的所有请求路径
* target为后端的接口地址，会将后端接口路径为/api的接口转到前端`http://localhost:3000/api`下
* rewrite可以改写请求路径，如果后端的接口后没有`/api`可以通过这个将请求地址后的`/api`替换为空
* 实际请求的时候`baseURL`只要写`/api/xxx`就行了，相当于请求本地服务器的接口，本地服务器再请求后端接口